{"ast":null,"code":"import React,{createContext,useState,useEffect}from'react';import axios from\"axios\";import{jsx as _jsx}from\"react/jsx-runtime\";export const AuthContext=/*#__PURE__*/createContext();export default(_ref=>{let{children}=_ref;const[user,setUser]=useState(null);const[isAuthenticated,setIsAuthenticated]=useState(false);const[isLoaded,setIsLoaded]=useState(false);// useEffect(() => {\n//     getUser();\n// }, []);\nasync function getUser(){try{const res=await axios.get(\"/user/account-info\");if(res.status===200){console.log(res.data);setUser(res.data.user);setIsAuthenticated(true);setIsLoaded(true);}else{setUser(null);setIsAuthenticated(false);setIsLoaded(true);}}catch(error){setUser(null);setIsAuthenticated(false);setIsLoaded(true);}}return/*#__PURE__*/_jsx(\"div\",{children:!isLoaded?/*#__PURE__*/_jsx(\"h1\",{children:\" \"}):/*#__PURE__*/_jsx(AuthContext.Provider,{value:{user,setUser,isAuthenticated,setIsAuthenticated},children:children})});});","map":{"version":3,"names":["React","createContext","useState","useEffect","axios","jsx","_jsx","AuthContext","_ref","children","user","setUser","isAuthenticated","setIsAuthenticated","isLoaded","setIsLoaded","getUser","res","get","status","console","log","data","error","Provider","value"],"sources":["/Users/envyhose/Desktop/programs/keepsafe_repo/keepsafe/src/context/AuthContext.js"],"sourcesContent":["import React, { createContext, useState, useEffect } from 'react';\nimport axios from \"axios\";\n\nexport const AuthContext = createContext();\n\nexport default ({ children }) => {\n    const [user, setUser] = useState(null);\n    const [isAuthenticated, setIsAuthenticated] = useState(false);\n    const [isLoaded, setIsLoaded] = useState(false);\n\n    // useEffect(() => {\n    //     getUser();\n    // }, []);\n\n    async function getUser() {\n        try {\n            const res = await axios.get(\"/user/account-info\");\n            if (res.status === 200) {\n                console.log(res.data)\n                setUser(res.data.user);\n                setIsAuthenticated(true);\n                setIsLoaded(true);\n            } else {\n                setUser(null);\n                setIsAuthenticated(false);\n                setIsLoaded(true);\n            }\n        } catch (error) {\n            setUser(null);\n            setIsAuthenticated(false);\n            setIsLoaded(true);\n        }\n    }\n\n    return (\n        <div>\n            {!isLoaded ? <h1> </h1> :\n                <AuthContext.Provider value={{ user, setUser, isAuthenticated, setIsAuthenticated }}>\n                    {children}\n                </AuthContext.Provider>}\n        </div>\n    )\n}"],"mappings":"AAAA,MAAO,CAAAA,KAAK,EAAIC,aAAa,CAAEC,QAAQ,CAAEC,SAAS,KAAQ,OAAO,CACjE,MAAO,CAAAC,KAAK,KAAM,OAAO,CAAC,OAAAC,GAAA,IAAAC,IAAA,yBAE1B,MAAO,MAAM,CAAAC,WAAW,cAAGN,aAAa,CAAC,CAAC,CAE1C,eAAeO,IAAA,EAAkB,IAAjB,CAAEC,QAAS,CAAC,CAAAD,IAAA,CACxB,KAAM,CAACE,IAAI,CAAEC,OAAO,CAAC,CAAGT,QAAQ,CAAC,IAAI,CAAC,CACtC,KAAM,CAACU,eAAe,CAAEC,kBAAkB,CAAC,CAAGX,QAAQ,CAAC,KAAK,CAAC,CAC7D,KAAM,CAACY,QAAQ,CAAEC,WAAW,CAAC,CAAGb,QAAQ,CAAC,KAAK,CAAC,CAE/C;AACA;AACA;AAEA,cAAe,CAAAc,OAAOA,CAAA,CAAG,CACrB,GAAI,CACA,KAAM,CAAAC,GAAG,CAAG,KAAM,CAAAb,KAAK,CAACc,GAAG,CAAC,oBAAoB,CAAC,CACjD,GAAID,GAAG,CAACE,MAAM,GAAK,GAAG,CAAE,CACpBC,OAAO,CAACC,GAAG,CAACJ,GAAG,CAACK,IAAI,CAAC,CACrBX,OAAO,CAACM,GAAG,CAACK,IAAI,CAACZ,IAAI,CAAC,CACtBG,kBAAkB,CAAC,IAAI,CAAC,CACxBE,WAAW,CAAC,IAAI,CAAC,CACrB,CAAC,IAAM,CACHJ,OAAO,CAAC,IAAI,CAAC,CACbE,kBAAkB,CAAC,KAAK,CAAC,CACzBE,WAAW,CAAC,IAAI,CAAC,CACrB,CACJ,CAAE,MAAOQ,KAAK,CAAE,CACZZ,OAAO,CAAC,IAAI,CAAC,CACbE,kBAAkB,CAAC,KAAK,CAAC,CACzBE,WAAW,CAAC,IAAI,CAAC,CACrB,CACJ,CAEA,mBACIT,IAAA,QAAAG,QAAA,CACK,CAACK,QAAQ,cAAGR,IAAA,OAAAG,QAAA,CAAI,GAAC,CAAI,CAAC,cACnBH,IAAA,CAACC,WAAW,CAACiB,QAAQ,EAACC,KAAK,CAAE,CAAEf,IAAI,CAAEC,OAAO,CAAEC,eAAe,CAAEC,kBAAmB,CAAE,CAAAJ,QAAA,CAC/EA,QAAQ,CACS,CAAC,CAC1B,CAAC,CAEd,CAAC"},"metadata":{},"sourceType":"module","externalDependencies":[]}